#!/usr/bin/env python3

import argparse
import os 
import arena_evaluation.metrics as Metrics
import time

# python your_script.py your_directory --pedsim
# rosrun arena_evaluation get_metrics /media/lwf/Bak_U/arena_backup/eval_data/240529/s10d10_convex/burger
if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument("dir") #表示用户需要指定的数据目录
    # argparse.ArgumentParser()用于创建一个解析器对象，并可以通过调用其方法来添加需要解析的参数和设置对应的属性。
    # 在这里，我们使用add_argument()方法来添加一个位置参数dir，它没有任何前缀（例如"--"或"-"），因此它被称为位置参数。
    # "dir"是该参数的名称，它会被解析器用来识别相应的参数。如果命令行中未提供该参数的值，则解析器将引发错误并显示帮助文本。

    """
    --pedsim: 这是参数的名称，表示在命令行中使用--pedsim来启用该参数。
    action="store_const": 这是指定参数的行为。在这里，store_const表示当命令行中指定了--pedsim时，
    argparse将会把指定的值（在这个例子中是const=True的True）存储到arguments.pedsim中。
    default=False: 这是指定参数的默认值。在这个例子中，如果命令行中没有指定--pedsim，则arguments.pedsim将默认为False。
    """
    parser.add_argument("--pedsim", action="store_const", const=True, default=False)
    arguments = parser.parse_args()

    if arguments.pedsim:
        print("Using pedsim metrics")
        metrics = Metrics.PedsimMetrics(
            dir = arguments.dir
        )

    else:
        print("Using default metrics")
        metrics = Metrics.Metrics(
            dir = arguments.dir
        )

    metrics.data.to_csv(os.path.join(arguments.dir, "metrics.csv"))
    # 这段代码的作用是将metrics.data数据保存为一个CSV文件，并存储到指定目录下。
    # 具体来说，metrics.data是一个Pandas DataFrame对象，通常用于处理和分析结构化的表格数据。
    # 而to_csv()是该对象的一个方法，用于将DataFrame中的数据保存为一个标准的CSV文件。该方法接受一个文件路径参数，指定CSV文件应该保存在哪个位置。
